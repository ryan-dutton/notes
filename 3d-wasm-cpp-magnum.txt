Steps required to render 3D in a web-browser using WASM and C++
===============================================================

Create a base machine
=====================
- Install Virtualbox
- Download Fedora ISO Image V38?
- Create a Fedora Virtual Machine using downloaded ISO (8GB RAM / 20GB HD)

Make a projects directory
=================
cd ~
mkdir projects
cd projects


Install Emscripten
==================
Emscripten is required to provide a C/C++ toolchain targetting WASM
git clone https://github.com/emscripten-core/emsdk.git
cd emsdk
./emsdk install latest
./emsdk activate latest


Install Magnum bootstrap project
=================================
wget https://github.com/mosra/magnum-bootstrap/archive/base.zip
unzip base.zip
cd magnum-bootstrap-base

Install Magnum and Corrade libs (under magnum-bootstrap-base)
=================================================
git clone https://github.com/mosra/corrade.git
git clone https://github.com/mosra/magnum.git

Edit CMakeLists.txt and replace contents with:

cmake_minimum_required(VERSION 3.4)
project(MyApplication)

set(CMAKE_MODULE_PATH "${PROJECT_SOURCE_DIR}/modules/" ${CMAKE_MODULE_PATH})

# Add Corrade as a subproject
add_subdirectory(corrade EXCLUDE_FROM_ALL)

# Add Magnum as a subproject, enable Sdl2Application
set(MAGNUM_WITH_SDL2APPLICATION ON CACHE BOOL "" FORCE)
add_subdirectory(magnum EXCLUDE_FROM_ALL)

add_subdirectory(src)




Install CMake and other libs
==========================
sudo dnf install cmake gcc g++ SDL2-devel


Run a test build (SLD2 window, not emscripten)
==========================
mkdir -p build && cd build
cmake -DCMAKE_BUILD_TYPE=Debug ..
cmake --build .
#run the test
./Debug/bin/MyApplication
#you should see a blank window

Build Corrade for Emscripten
====================
#first do a manual build of corrade to generate corrade-rc executable
cd ../corrade
mkdir build && cd build
cmake .. -DCORRADE_BUILD_STATIC=On
cmake --build .
find -name "corrade-rc"
# should be found at ./bin/corrade-rc
# equating to /home/ryan/magnum-bootstrap-base/corrade/bin/corrade-rc
# now build Corrade 'for' emscripten
cd ../ #should be in ~/magnum-bootstrap-base/corrade
cp -R ../toolchains .
mkdir build-emscripten && cd build-emscripten
cmake .. -DCMAKE_TOOLCHAIN_FILE="../toolchains/generic/Emscripten-wasm.cmake" -DEMSCRIPTEN_PREFIX=/home/ryan/emsdk/upstream/emscripten  -DCMAKE_BUILD_TYPE=Release -DCCORRADE_RC_EXECUTABLE=/home/ryan/magnum-bootstrap-base/corrade/build/bin/corrade-rc
cmake --build .

cd ../..
pwd #should be /home/ryan/magnum-bootstrap-base
mkdir build-emscripten && cd build-emscripten
cmake .. -DCMAKE_TOOLCHAIN_FILE="../toolchains/generic/Emscripten-wasm.cmake" -DCMAKE_BUILD_TYPE=Release -DCCORRADE_RC_EXECUTABLE=/home/ryan/magnum-bootstrap-base/corrade/build/bin/corrade-rc
cmake --build .

#build with emscripten
cd ../../build-emscripten
mkdir build-emscripten && cd build-emscripten
#MyApplication.js and MyApplication.wasm should be in ./Release/bin
cd ./Release/bin
nano index.html
#enter contents

<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8" />
  <title>Magnum Emscripten Application</title>
  <link rel="stylesheet" href="WebApplication.css" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
</head>
<body>
  <h1>Magnum Emscripten Application</h1>
  <div class="mn-container">
    <div class="mn-sizer"><div class="mn-expander"><div class="mn-listener">
      <canvas class="mn-canvas" id="canvas"></canvas>
      <div class="mn-status" id="status">Initialization...</div>
      <div class="mn-status-description" id="status-description"></div>
      <script src="EmscriptenApplication.js"></script>
      <script async="async" src="MyAplication.js"></script>
    </div></div></div>
  </div>
</body>
</html>

cp ../../../magnum/src/Magnum/Platform/WebApplication.css .
cp ../../../magnum/src/Magnum/Platform/EmscriptenApplication.js .

python3 -m http.server






